profile: 3DGS-INRIA.ply
profile_version: 0.1

scene:
  primitives: 3DGS-INRIA
  params:
    - means
    - scales
    - opacities
    - quaternions
    - sh

ops:
  - input_fields: [sh]
    ops:
      - split:
          split_size_or_sections: [1, 15]
          dim: 1
          squeeze: false
    out_fields: [f_dc, f_rest]

  - input_fields: [f_dc]
    ops:
      - flatten:
          start_dim: 1
      - split:
          split_size_or_sections: 1
          dim: 1
          squeeze: true
    out_field_prefix: point_cloud.ply@f_dc

  - input_fields: [f_rest]
    ops:
      - permute:
          dims: [0, 2, 1]
      - flatten:
          start_dim: 1
      - split:
          split_size_or_sections: 1
          dim: 1
          squeeze: true
    out_field_prefix: point_cloud.ply@f_rest_

  - input_fields: [quaternions]
    ops:
      - split:
          split_size_or_sections: 1
          dim: 1
          squeeze: true
    out_field_prefix: point_cloud.ply@rot_

  - input_fields: [means]
    ops:
      - split:
          split_size_or_sections: 1
          dim: 1
          squeeze: true
    out_fields: [point_cloud.ply@x, point_cloud.ply@y, point_cloud.ply@z]

  - input_fields: [scales]
    ops:
      - remapping:
          method: log
      - split:
          split_size_or_sections: 1
          dim: 1
          squeeze: true
    out_field_prefix: point_cloud.ply@scale_

  - input_fields: [opacities]
    ops:
      - remapping:
          method: inverse-sigmoid
    out_fields: [point_cloud.ply@opacity]

files:
  - from_fields_with_prefix: point_cloud.ply@
    type: ply
    file_path: point_cloud.ply
